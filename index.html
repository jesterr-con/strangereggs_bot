import React, { useState, useEffect } from 'react';

const StrangerTapper = () => {
  const [energy, setEnergy] = useState(0); // –û—á–∫–∏ (–ï–Ω–µ—Ä–≥—ñ—è –≤–∏–≤–æ—Ä–æ—Ç—É)
  const [eggHP, setEggHP] = useState(100); // –ó–¥–æ—Ä–æ–≤'—è —è–π—Ü—è
  const [savedSouls, setSavedSouls] = useState([]); // –ö–æ–ª–µ–∫—Ü—ñ—è –ø–µ—Ä—Å–æ–Ω–∞–∂—ñ–≤/–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ñ–≤
  const [isVibrating, setIsVibrating] = useState(false);

  // –°–ø–∏—Å–æ–∫ "—ñ–≥—Ä–∞—à–æ–∫" –∑—ñ —Å–≤—ñ—Ç—É Stranger Things
  const upsideDownLoot = [
    { icon: "üßá", name: "Eggo" },
    { icon: "üìª", name: "Walkie-Talkie" },
    { icon: "üö≤", name: "Mike's Bike" },
    { icon: "üé∏", name: "Eddie's Guitar" },
    { icon: "üëßüèª", name: "Eleven" },
    { icon: "üß¢", name: "Dustin" }
  ];

  const handleTap = (e) => {
    if (eggHP > 0) {
      setEggHP(prev => prev - 5);
      setEnergy(prev => prev + 11); // 11 ‚Äî –º–∞–≥—ñ—á–Ω–µ —á–∏—Å–ª–æ ;)
      setIsVibrating(true);
      setTimeout(() => setIsVibrating(false), 50);
    } else {
      // –Ø–π—Ü–µ —Ä–æ–∑—Ä–∏–≤–∞—î—Ç—å—Å—è, –≤–∏—Ö–æ–¥–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
      const loot = upsideDownLoot[Math.floor(Math.random() * upsideDownLoot.length)];
      setSavedSouls([...savedSouls, loot]);
      setEggHP(100); // –ü–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –Ω–æ–≤–µ —è–π—Ü–µ
      setEnergy(prev => prev + 500);
    }
  };

  return (
    <div className="flex flex-col items-center min-h-screen bg-[#050505] text-[#ff0000] p-6 font-mono overflow-hidden">
      {/* Header: –°—Ç–∏–ª—å –ù–µ–æ–Ω—É */}
      <div className="w-full text-center mb-10">
        <h1 className="text-4xl font-black tracking-widest uppercase shadow-red-500 drop-shadow-[0_0_10px_rgba(255,0,0,0.8)]">
          Stranger Kinders
        </h1>
        <div className="mt-4 text-2xl font-bold text-white">
          {energy.toLocaleString()} <span className="text-red-600">‚ö°</span>
        </div>
      </div>

      {/* –ì–æ–ª–æ–≤–Ω–µ –Ø–π—Ü–µ */}
      <div className="relative flex flex-col items-center">
        {/* –ß–∞—Å—Ç–∏–Ω–∫–∏ "–ü–æ–ø–µ–ª—É" (Upside Down vibe) */}
        <div className="absolute inset-0 pointer-events-none animate-pulse">
          <div className="w-full h-full bg-[url('https://www.transparenttextures.com/patterns/dust.png')] opacity-20"></div>
        </div>

        <div 
          onClick={handleTap}
          className={`relative w-64 h-80 transition-all duration-75 cursor-pointer
            ${isVibrating ? 'scale-110 rotate-1' : 'scale-100'}
          `}
        >
          {/* –¢—ñ–ª–æ –Ø–π—Ü—è: –¢–µ–º–Ω–æ-—á–µ—Ä–≤–æ–Ω–µ –∑ –ª–æ–∑–∞–º–∏ */}
          <div className="w-full h-full bg-gradient-to-b from-[#1a0000] via-[#4d0000] to-black rounded-[50%_50%_50%_50%_/_65%_65%_35%_35%] shadow-[0_0_40px_rgba(255,0,0,0.4)] border-2 border-[#ff0000] flex items-center justify-center relative overflow-hidden">
             <span className="text-8xl filter grayscale brightness-50 contrast-125">ü•ö</span>
             
             {/* –ê–Ω—ñ–º–æ–≤–∞–Ω—ñ –ª–æ–∑–∏ (—Å–º—É–∂–∫–∏) */}
             <div className="absolute inset-0 opacity-40 bg-[repeating-linear-gradient(45deg,transparent,transparent_10px,#ff0000_10px,#ff0000_11px)]"></div>
          </div>
        </div>

        {/* HP Bar: –í–∏–≥–ª—è–¥–∞—î —è–∫ –¥–∞—Ç—á–∏–∫ –∑ 80-—Ö */}
        <div className="mt-10 w-72">
          <div className="flex justify-between text-[10px] mb-1 font-bold tracking-tighter uppercase">
            <span>Void Stability</span>
            <span>{eggHP}%</span>
          </div>
          <div className="w-full bg-gray-900 h-3 rounded-none border border-red-900 overflow-hidden">
            <div 
              className="bg-red-600 h-full shadow-[0_0_10px_#ff0000]" 
              style={{ width: `${eggHP}%` }}
            ></div>
          </div>
        </div>
      </div>

      {/* –ö–æ–ª–µ–∫—Ü—ñ—è –í—Ä—è—Ç–æ–≤–∞–Ω–∏—Ö */}
      <div className="mt-auto w-full max-w-md">
        <h3 className="text-xs font-bold mb-3 border-b border-red-900 pb-1 text-gray-500 uppercase tracking-widest">
          Found in the Void:
        </h3>
        <div className="flex gap-4 overflow-x-auto p-4 bg-black border border-red-900/30 rounded-lg shadow-inner">
          {savedSouls.length === 0 && <span className="text-gray-700 text-xs italic">Nothing yet...</span>}
          {savedSouls.map((item, index) => (
            <div key={index} className="flex flex-col items-center min-w-[60px] animate-bounce">
              <span className="text-4xl">{item.icon}</span>
              <span className="text-[8px] mt-1 text-white uppercase">{item.name}</span>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

export default StrangerTapper;
